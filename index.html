<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>깡갤 번역기</title>
    <link rel="stylesheet" href="styles.css?v=250829a3">
    <link rel="stylesheet" href="darkAvocado.css?v=241122a7">
    <link rel="stylesheet" href="avocado.css?v=241122a6">
    <link rel="stylesheet" href="darkTheme.css?v=241122a6">
    <link rel="stylesheet" href="pastel.css?v=250526a1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Telugu:wght@100..900&family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.0/mammoth.browser.min.js"></script>
</head>
<body>
    <div class="container">
      <!-- 네비게이션 추가 -->
      <nav class="nav-bar">
        <button class="nav-btn active" data-page="main">
          <i class="fas fa-language"></i> 번역
        </button>
        <button class="nav-btn" data-page="settings">
          <i class="fas fa-cog"></i> 설정
        </button>
      </nav>
  
      <!-- 메인 페이지 컨테이너 -->
      <div id="mainPage" class="page active">
        <!-- 기존 번역 관련 요소들 이동 -->
        <div class="header">
            <h1>🤖 깡갤 번역기</h1>
            <div class="version-info">
                <span class="version-tag" id="versionTag"></span>
                <button class="changelog-btn" title="업데이트 내역">
                    💡
                    <span class="update-notification" id="updateNotification"></span>
                </button>
            </div>
                    
            <!-- 업데이트 내역 모달 추가 -->
            <div id="changelogModal" class="modal changelog-modal">
                <div class="modal-content changelog-content">
                    <button class="close-modal">&times;</button>
                    <h3>💡 업데이트 내역</h3>
                    <div class="changelog-list">
                        <div class="changelog-item">
                            <h4>v1.8.7 (2025-08-29) pm 05:52</h4>
                            <ul>
                                <li>번역 결과 편집 버튼 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.6 (2025-08-29) pm 05:20</h4>
                            <ul>
                                <li>프리필 기능 추가: 모든 모델 지원 (프롬프트 섹션을 확인해주세요!)</li>
                                <li>gpt-5 모델들 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.5 (2025-07-02) am 01:30</h4>
                            <ul>
                                <li>제미나이 정식 2.5 프로 및 플래시 모델 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.4 (2025-05-23) pm 02:02</h4>
                            <ul>
                                <li>설정 내보내기 기능 보완 / 히스토리 내보내기 즐겨찾기 정보값 누락되는 거 수정 / 가져오기 버튼 버그 수정</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.3 (2025-05-23) am 07:70</h4>
                            <ul>
                                <li>고급 설정 입력값 오류 수정</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.2 (2025-05-23) am 07:05</h4>
                            <ul>
                                <li>커스텀 모델 관리 기능 추가: 사용자가 직접 모델을 추가하고 관리할 수 있도록 개선</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.1 (2025-05-21) pm 10:00</h4>
                            <ul>
                                <li>리버스 프록시 지원 기능 추가: OpenAI 호환 API 엔드포인트 사용 가능</li>
                                <li>자동 모델 탐지 기능: 프록시 서버에서 사용 가능한 모델 자동 감지</li>
                                <li>슬라이더 스타일 개선: 모든 테마에서 일관된 슬라이더 디자인 적용</li>
                                <li>모바일 슬라이더 최적화: 터치 친화적이고 깔끔한 슬라이더 디자인</li>
                                <li>UI 배치 개선: 리버스 프록시 설정을 독립 섹션으로 분리</li>
                                <li>사용자 친화적 가이드: 설정별 상세 설명과 예시 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.8.0 (2025-05-21) pm 8:00</h4>
                            <ul>
                                <li>고급 모델 파라미터 설정 기능 추가: Temperature, Max Tokens, Top-P, Top-K 조정 가능</li>
                                <li>모델별 파라미터 지원: Gemini (모든 파라미터), OpenAI/Claude/Cohere (일부 파라미터)</li>
                                <li>파워유저 친화적 UI: 접히는 고급 설정, 슬라이더+숫자 입력 조합</li>
                                <li>개인화된 설정 저장: 각 파라미터별 localStorage 자동 저장</li>
                                <li>실시간 파라미터 동기화: 슬라이더와 숫자 입력이 실시간으로 연동</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.7.4 (2025-05-21) pm 7:00</h4>
                            <ul>
                                <li>용어집 섹션 테두리 스타일 개선: 번역 히스토리와 일치하는 테두리 적용</li>
                                <li>용어집 입력창 라이트 모드 구분감 대폭 개선: 그림자, 호버, 포커스 효과 추가</li>
                                <li>번역하기 버튼 크기 최적화: PC에서 더 적절한 크기로 조정</li>
                                <li>방향 전환 버튼 크기 조정: 템플릿 단축 버튼을 더 컴팩트하게 개선</li>
                                <li>용어집 드롭다운 메뉴 개선: 커스텀 화살표와 현대적 스타일 적용</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.7.3 (2025-05-21) pm 6:15</h4>
                            <ul>
                                <li>번역 중 스피너 디자인 대폭 개선: 구글 컬러 그라디언트를 활용한 현대적 디자인</li>
                                <li>불필요한 프로그레스 바 제거: 단계 표시는 유지하되 작동하지 않던 프로그레스 바 삭제</li>
                                <li>라이트 모드 입력 요소 구분감 개선: 미묘한 그림자와 호버 효과 추가</li>
                                <li>드롭다운 메뉴 시각적 개선: 커스텀 화살표 아이콘과 선명한 구분</li>
                                <li>포커스 및 호버 상태 향상: 부드러운 전환 효과와 명확한 시각적 피드백</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.7.2 (2025-05-21) pm 5:30</h4>
                            <ul>
                                <li>새로운 Gemini 2.5 모델 추가: Flash Preview 05-20, Pro Preview 05-06</li>
                                <li>Claude 4 Sonnet 2025-05-14 모델 추가</li>
                                <li>대폭 개선된 UI/UX: 현대적인 그라디언트 디자인, 향상된 애니메이션</li>
                                <li>개선된 로딩 애니메이션: 블러 효과 및 현대적인 스피너</li>
                                <li>강화된 오류 처리: 이모지 포함 친화적인 메시지, 상세한 상황별 안내</li>
                                <li>새로워진 버튼 디자인: 그라디언트, 호버 효과, 빛 반사 애니메이션</li>
                                <li>개선된 토스트 메시지: 더 부드러운 애니메이션, 시각적 계층 효과</li>
                                <li>모바일 최적화: 터치 친화적 인터페이스 개선</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.7.1 (2025-05-21) pm 3:00</h4>
                            <ul>
                                <li>구글 제미나이 최신 모델 추가: Gemini 2.5 Pro Preview 05-06, Gemini 2.5 Flash Preview 05-20</li>
                                <li>Anthropic Claude 4 소넷 모델 추가: claude-4-sonnet-20250219</li>
                                <li>전반적인 UI/UX 대폭 개선: 현대적인 디자인, 향상된 반응형 레이아웃</li>
                                <li>로딩 애니메이션 및 에러 메시지 시각적 개선</li>
                                <li>버튼 스타일 및 인터랙션 효과 개선</li>
                                <li>모바일 환경에서의 사용성 대폭 향상</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.7.0 (2025-04-15) am 9:30</h4>
                            <ul>
                                <li>용어집/사전 기능 추가: 이전 단어 변환 규칙 기능을 대체하며 맥락별 용어 관리 가능</li>
                                <li>배치 번역 기능 추가: 여러 텍스트를 한 번에 번역하고 결과 관리 가능</li>
                                <li>다양한 한글 웹 폰트 추가: RIDIBatang, Pretendard, SUIT 등 30여 가지 폰트 지원</li>
                                <li>용어집 맥락별 필터링 및 검색 기능 추가</li>
                                <li>용어집 내보내기/가져오기 기능 추가</li>
                                <li>배치 번역 결과 복사 및 다운로드 기능 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.6.9 (2025-03-29) am 6:00</h4>
                            <ul>
                                <li>구글 제미나이 2.5 Pro Experimental 모델 추가</li>
                                <li>Cohere 신모델 Command-A 03-2025 추가</li>
                                <li>OpenAI 모델 추가: o1-mini-2025-01-31, o1-pro-2025-03-19, gpt-4.5-preview-2025-02-27</li>
                                <li>Anthropic 모델 추가: claude-3-7-sonnet-20250219</li>
                                <li>번역 결과 다운로드 기능 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <div class="changelog-item">
                                <h4>v1.6.8 (2025-02-08) am 01:40</h4>
                                <ul>
                                    <li>제미나이 2.0 프로 exp 및 기타 새모델 추가</li>
                                    <li>제미나이 플래시 모델에 대한 세이프티 설정 추가 조정</li>
                                </ul>
                            </div>
                            <div class="changelog-item">
                                <h4>v1.6.7 (2025-01-15) pm 11:15</h4>
                                <ul>
                                    <li>제미나이 세이프티 설정 변경</li>
                                </ul>
                            </div>
                            <div class="changelog-item">
                                <h4>v1.6.6 (2024-12-20) am 09:10</h4>
                                <ul>
                                    <li>번역 제공 모델 리스트에 gemini-exp-1121 제거</li>
                                    <li>번역 제공 모델 리스트에 gemini 2.0 Flash Thinking Experimental 추가</li>
                                </ul>
                            </div>
                            <h4>v1.6.5 (2024-12-18) am 10:30</h4>
                            <ul>
                                <li>번역 제공 모델 리스트에 gemini-exp-1206 추가</li>
                                <li>번역 제공 모델 리스트에 gemini 2.0 Flash Experimental 추가</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.6.4 (2024-11-22) pm 7:45</h4>
                            <ul>
                                <li>다크 아보카도 UI 개선 / 기타 UI/UX 개선</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.6.３ (2024-11-22) pm 6:00</h4>
                            <ul>
                                <li>다크 아보카도 테마 추가</li>
                                <li>입력창 포커스 되면 복사 버튼 대신 X (전체 텍스트 삭제) 버튼 등장하도록 개선</li>
                                <li>PC에서도 편하게 지우도록 단축키 Ctrl+E로 사용 가능</li>
                                <li>아보카도 테마 버그 픽스</li>
                            </ul>
                        </div>
                        <div class="changelog-item">
                            <h4>v1.6.2 -2 (2024-11-22) am 8:32</h4>
                            <ul>
                                <li>아보카도 테마 번역 결과창 라이트 모드로 돌아가는 문제 수정</li>
                                <li>번역 제공 모델 리스트에 gemini-exp-1121 추가</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="translation-direction-controls">
            <div class="direction-btn-container">
                <button id="koToEnBtn" class="direction-btn">
                    <span class="direction-text">한 → 영</span>
                    <small class="template-name">선택된 템플릿: 없음</small>
                </button>
                <button class="set-template-btn" data-direction="koToEn">템플릿 설정</button>
            </div>
            <div class="direction-btn-container">
                <button id="enToKoBtn" class="direction-btn active">
                    <span class="direction-text">영 → 한</span>
                    <small class="template-name">선택된 템플릿: 없음</small>
                </button>
                <button class="set-template-btn" data-direction="enToKo">템플릿 설정</button>
            </div>
        </div>
        <div class="translation-box">
            <div class="input-group">
                <label for="sourceText">입력 텍스트</label>
                <div class="textarea-container">
                    <textarea id="sourceText" placeholder="번역할 텍스트를 입력하세요"></textarea>
                    <div class="text-counter">
                        <span id="sourceCharCount">0</span> 글자
                        <span id="sourceWordCount">0</span> 단어
                    </div>
                    <button class="copy-btn" id="copySource">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
            <div class="input-group">
                <label for="translatedText">
                    번역 결과
                    <button id="toggleResultView" class="toggle-result-btn" title="편집/미리보기 전환">
                        <i class="fas fa-edit"></i>
                    </button>
                </label>
                <div class="textarea-container">
                    <div id="formattedResult" class="formatted-result"></div>
                    <textarea id="translatedText" placeholder="번역 결과가 여기에 표시됩니다"></textarea>
                    <div class="text-counter">
                        <span id="translatedCharCount">0</span> 글자
                        <span id="translatedWordCount">0</span> 단어
                    </div>
                    <button class="copy-btn" id="copyTranslated">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="result-bottom-controls">
                    <div id="autoSaveNotification" class="auto-save-notification">자동 저장되었습니다</div>
                </div>
            </div>
        </div>
        <div class="translation-progress">
            <div class="progress-steps">
              <div class="step" data-step="1">
                <div class="step-icon">1</div>
                <div class="step-label">텍스트 분석</div>
              </div>
              <div class="step" data-step="2">
                <div class="step-icon">2</div>
                <div class="step-label">번역 중</div>
              </div>
              <div class="step" data-step="3">
                <div class="step-icon">3</div>
                <div class="step-label">검수</div>
              </div>
            </div>
          </div>
        <div class="translate-controls">
            <button id="switchDirectionBtn" class="direction-switch-btn" title="번역 방향 전환">
                <span>⇄</span>
            </button>
            <button id="translateBtn" class="translate-btn">
                번역하기
            </button>
            <button class="download-btn" id="downloadTranslated" title="번역 결과 다운로드">
                <i class="fas fa-download"></i>
            </button>
        </div>
        <div class="prompt-section">
            <label for="customPrompt">번역 프롬프트 설정</label>
            <div class="prompt-controls">
                <select id="promptTemplate">
                    <option value="">템플릿 선택...</option>
                    <option value="basicEnToKo">기본 번역 (영→한)</option>
                    <option value="basicKoToEn">기본 번역(한→영)</option>
                    <option value="natural">자연스러운 번역</option>
                    <option value="formal">격식체 번역</option>
                    <option value="casual">구어체 번역</option>
                </select>
                <button id="saveAsTemplate" class="btn-small">현재 프롬프트 저장</button>
            </div>
            <textarea id="customPrompt" rows="3"></textarea>
            <button id="savePrompt" class="btn-small">프롬프트 저장</button>
            
            <!-- 프리필 설정 추가 -->
            <div class="prefill-section">
                <div class="prefill-toggle">
                    <input type="checkbox" id="usePrefill">
                    <label for="usePrefill">프리필(Prefill) 사용</label>
                    <span class="prefill-info" title="AI가 응답을 시작할 때 미리 정해진 텍스트로 시작하도록 합니다">ℹ️</span>
                </div>
                <div id="prefillContent" style="display: none;">
                    <label for="prefillPrompt">프리필 내용</label>
                    <textarea id="prefillPrompt" rows="2" placeholder="AI 응답의 시작 부분을 입력하세요..."></textarea>
                    <button id="resetPrefill" class="btn-small">기본값으로 재설정</button>
                </div>
            </div>
        </div>
        
        <!-- 번역에 적용할 용어집 카테고리 선택 -->
        <div class="glossary-category-section">
            <label for="translationGlossaryContext">번역에 적용할 용어집 카테고리</label>
            <select id="translationGlossaryContext" class="glossary-select">
                <option value="all">모든 카테고리</option>
                <option value="general">일반</option>
                <option value="tech">기술/IT</option>
                <option value="med">의학</option>
                <option value="law">법률</option>
                <option value="biz">비즈니스</option>
                <option value="acad">학술</option>
            </select>
        </div>
        
        <!-- 배치 번역 섹션을 메인 페이지로 이동 -->
        <div class="batch-translation-section">
            <h3>
                배치 번역
                <button class="toggle-btn" id="toggleBatch"><i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="batch-content" id="batchContent">
                <div class="batch-controls">
                    <div class="batch-input">
                        <textarea id="batchInput" placeholder="여러 텍스트를 입력하세요. 빈 줄이나 @@@를 구분자로 사용할 수 있습니다."></textarea>
                    </div>
                    <div class="batch-options">
                        <label>
                            <input type="checkbox" id="useSeparator" checked>
                            구분자 사용
                        </label>
                        <label>
                            <input type="radio" name="separatorType" id="useEmptyLine" checked>
                            빈 줄
                        </label>
                        <label>
                            <input type="radio" name="separatorType" id="useTripleAt">
                            @@@
                        </label>
                        <label>
                            <input type="checkbox" id="applyGlossary" checked>
                            용어집 적용
                        </label>
                        <label>
                            <input type="checkbox" id="saveToHistory" checked>
                            히스토리에 저장
                        </label>
                        <button id="startBatchTranslation" class="btn-small">배치 번역 시작</button>
                    </div>
                </div>
                <div class="batch-results" id="batchResults">
                    <div class="batch-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="batchProgressFill"></div>
                        </div>
                        <div class="progress-text">
                            <span id="batchProgressText">0/0</span> 완료
                        </div>
                    </div>
                    <div class="batch-result-list" id="batchResultList"></div>
                    <div class="batch-result-actions">
                        <button id="copyAllResults" class="btn-small">모든 결과 복사</button>
                        <button id="downloadResults" class="btn-small">결과 다운로드</button>
                        <button id="clearBatchResults" class="btn-small">결과 초기화</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="source-text-controls">
            <label for="file-upload" class="file-upload-btn">
                <i class="fas fa-file-upload"></i> 파일 업로드
            </label>
            <input type="file" id="file-upload" accept=".txt,.doc,.docx,.pdf" hidden>
            <div class="supported-formats">
                지원 형식: TXT, DOC, DOCX, PDF (최대 30MB)
            </div>
        </div>
        
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <span>번역 중...</span>
        </div>
        <div id="errorMessage" class="error-message"></div>
        
        <div class="shortcut-help">
            <button id="showShortcuts" class="btn-small">
                <i class="fas fa-keyboard"></i> 단축키
            </button>
        </div>

        <div id="shortcutModal" class="modal">
            <div class="modal-content">
                <h3>단축키 목록</h3>
                <ul>
                    <li><kbd>Ctrl</kbd> + <kbd>Enter</kbd> : 번역하기</li>
                    <li><kbd>Ctrl</kbd> + <kbd>S</kbd> : 프롬프트 저장</li>
                    <li><kbd>Esc</kbd> : 번역 취소</li>
                    <li><kbd>Ctrl</kbd> + <kbd>I</kbd> : 아보카도 모드 토글</li>
                    <li><kbd>Ctrl</kbd> + <kbd>L</kbd> : 라이트 모드 토글</li>
                    <li><kbd>Ctrl</kbd> + <kbd>D</kbd> : 다크모드 토글</li>
                    <li><kbd>Alt</kbd> + <kbd>1</kbd> : 한→영 전환</li>
                    <li><kbd>Alt</kbd> + <kbd>2</kbd> : 영→한 전환</li>
                    <li><kbd>Ctrl</kbd> + <kbd>E</kbd> : 입력 텍스트 전체 삭제 (단, 입력 텍스트 창이 눌린 상태에서만 동작)</li>
                </ul>
                <button class="close-modal">&times;</button>
            </div>
        </div>
        <div class="copyright">
            <p>copyrightⓒ 2024 All rights reserved by <a href="https://github.com/tincansimagine" target="_blank">tincansimagine</a></p>
            <p>모든 페이지 내용의 소유권은 tincansimagine에게 있습니다.</p>
        </div>
      </div>
  
      <!-- 설정 페이지 컨테이너 -->
      <div id="settingsPage" class="page">
        <!-- 기존 설정 관련 요소들 이동 -->
        <div class="settings-section">
            <h2>테마 설정</h2>
            <div class="theme-toggle-container">
                <button class="theme-toggle" data-theme="light" title="라이트 모드">☀️</button>
                <button class="theme-toggle" data-theme="dark" title="다크 모드">🌙</button>
                <button class="theme-toggle" data-theme="avocado" title="아보카도 모드">🥑</button>
                <button class="theme-toggle" data-theme="dark-avocado" title="다크 아보카도 모드">🥑</button>
                <button class="theme-toggle" data-theme="pastel-dream" title="파스텔 모드">🌈</button>
            </div>
        </div>
        <div class="settings-section">
            <h2>API키 설정</h2>
            <div class="api-section">
                <div class="api-keys">
                    <div class="input-group">
                        <label for="geminiApiKey">Google Gemini API Key</label>
                        <div class="api-input-container">
                            <input type="password" id="geminiApiKey" placeholder="Gemini API 키를 입력하세요">
                            <button class="toggle-password" type="button" onclick="togglePasswordVisibility(this)">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="openaiApiKey">OpenAI API Key</label>
                        <div class="api-input-container">
                            <input type="password" id="openaiApiKey" placeholder="OpenAI API 키를 입력하세요">
                            <button class="toggle-password" type="button" onclick="togglePasswordVisibility(this)">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="anthropicApiKey">Anthropic API Key</label>
                        <div class="api-input-container">
                            <input type="password" id="anthropicApiKey" placeholder="Anthropic API 키를 입력하세요">
                            <button class="toggle-password" type="button" onclick="togglePasswordVisibility(this)">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="anthropicApiKey">Cohere API Key</label>
                        <div class="api-input-container">
                            <input type="password" id="cohereApiKey" placeholder="Cohere API 키를 입력하세요">
                            <button class="toggle-password" type="button" onclick="togglePasswordVisibility(this)">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <button id="saveApiKeys" class="btn-small">API 키 저장</button>
                </div>
        </div>
        
        <!-- 커스텀 모델 관리 -->
        <div class="settings-section">
            <h2>🎯 커스텀 모델 관리</h2>
            <div class="custom-model-section">
                <div class="custom-model-input">
                    <div class="input-group">
                        <label for="customModelName">모델명</label>
                        <input type="text" id="customModelName" placeholder="예: gpt-4.5-turbo, claude-4-opus">
                    </div>
                    <div class="input-group">
                        <label for="customModelProvider">공급자</label>
                        <select id="customModelProvider">
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="gemini">Google Gemini</option>
                            <option value="cohere">Cohere</option>
                        </select>
                    </div>
                    <button id="addCustomModel" class="btn-small">
                        <i class="fas fa-plus"></i> 모델 추가
                    </button>
                </div>
                
                <div class="custom-model-list" id="customModelList">
                    <h4>추가된 커스텀 모델</h4>
                    <div class="custom-models-container" id="customModelsContainer">
                        <div class="no-custom-models">
                            <p>추가된 커스텀 모델이 없습니다.</p>
                            <small>새로운 모델을 위에서 추가해보세요!</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 리버스 프록시 설정 -->
        <div class="settings-section">
            <div class="proxy-header">
                <h2>🔄 리버스 프록시 설정</h2>
                <div class="proxy-toggle">
                    <input type="checkbox" id="useReverseProxy">
                    <label for="useReverseProxy">사용하기</label>
                </div>
            </div>
            <div class="proxy-description">
                <small>OpenAI 호환 API를 제공하는 리버스 프록시나 커스텀 엔드포인트를 사용할 수 있습니다.</small>
            </div>
            <div id="proxySettings" style="display: none;">
                <div class="input-group">
                    <label for="reverseProxyUrl">🌐 프록시 엔드포인트 URL</label>
                    <div class="api-input-container">
                        <input type="text" id="reverseProxyUrl" placeholder="https://your-proxy.domain.com">
                    </div>
                    <small>예: https://api.openai.com, https://your-proxy.com</small>
                </div>
                <div class="input-group">
                    <label for="reverseProxyApiKey">🔑 API 키 (선택사항)</label>
                    <div class="api-input-container">
                        <input type="password" id="reverseProxyApiKey" placeholder="리버스 프록시용 API 키 (필요한 경우)">
                        <button class="toggle-password" type="button" onclick="togglePasswordVisibility(this)">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <small>리버스 프록시에서 별도 API 키가 필요한 경우에만 입력하세요.</small>
                </div>
                <div class="proxy-actions">
                    <button id="testProxyBtn" class="btn-small">🔗 연결 테스트</button>
                    <button id="detectModelsBtn" class="btn-small">🔍 모델 자동 탐지</button>
                </div>
            </div>
        </div>
            <div class="model-select">
                <label for="modelSelect">번역 모델 선택</label>
                <select id="modelSelect">
                    <!-- 옵션들은 JavaScript에서 동적으로 생성됨 -->
                </select>
            </div>
            
            <!-- 고급 모델 파라미터 설정 -->
            <div class="advanced-params-section">
                <h3>
                    🎛️ 고급 설정
                    <button class="toggle-btn" id="toggleAdvancedParams"><i class="fas fa-chevron-down"></i></button>
                </h3>
                <div class="advanced-params-content" id="advancedParamsContent" style="display: none;">
                    <div class="param-group">
                        <div class="param-item">
                            <label for="temperatureSlider">🌡️ 창의성 (Temperature)</label>
                            <div class="param-control">
                                <input type="range" id="temperatureSlider" min="0" max="100" value="20" class="param-slider">
                                <input type="number" id="temperatureInput" min="0" max="1" step="0.01" value="0.2" class="param-number">
                            </div>
                            <p class="param-desc">낮을수록 일관적, 높을수록 창의적</p>
                        </div>
                        
                        <div class="param-item">
                            <label for="maxTokensSlider">📏 최대 응답 길이</label>
                            <div class="param-control">
                                <input type="range" id="maxTokensSlider" min="100" max="100000" value="2000" class="param-slider">
                                <input type="number" id="maxTokensInput" min="100" max="8000" value="2000" class="param-number">
                            </div>
                            <p class="param-desc">응답 최대 토큰 수 (대략 글자수 × 0.7)</p>
                        </div>
                        
                        <div class="param-item" id="topPGroup">
                            <label for="topPSlider">🎯 핵심도 (Top-P)</label>
                            <div class="param-control">
                                <input type="range" id="topPSlider" min="0" max="100" value="95" class="param-slider">
                                <input type="number" id="topPInput" min="0" max="1" step="0.01" value="0.95" class="param-number">
                            </div>
                            <p class="param-desc">낮을수록 핵심 단어만, 높을수록 다양한 표현</p>
                        </div>
                        
                        <div class="param-item" id="topKGroup">
                            <label for="topKSlider">🔢 다양성 (Top-K)</label>
                            <div class="param-control">
                                <input type="range" id="topKSlider" min="1" max="100" value="40" class="param-slider">
                                <input type="number" id="topKInput" min="1" max="100" value="40" class="param-number">
                            </div>
                            <p class="param-desc">고려할 단어 후보 수 (Gemini만 지원)</p>
                        </div>
                        
                        <div class="param-actions">
                            <button id="resetParams" class="btn-small">기본값 복원</button>
                            <button id="saveParams" class="btn-small">저장</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="data-management-section">
            <h3>⚙️ 설정 관리</h3>
            <div class="data-controls">
                <button id="exportData" class="btn-small">
                    <span>💾 설정 내보내기</span>
                    <small>모든 설정 파일로 저장</small>
                </button>
                <button id="importData" class="btn-small">
                    <span>📂 설정 가져오기</span>
                    <small>저장된 설정 복원</small>
                </button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
            </div>
        </div>
        <div class="settings-section">
            <div class="style-settings">
                <h3>텍스트 스타일 설정</h3>
                <div class="style-options">
                    <div class="color-picker">
                        <label for="baseColor">기본 텍스트 색상:</label>
                        <input type="color" id="baseColor" value="#333333">
                    </div>
                    <div class="color-picker">
                        <label for="quoteColor">대사 색상 (쌍따옴표):</label>
                        <input type="color" id="quoteColor" value="#2E5CB8">
                    </div>
                    <div class="color-picker">
                        <label for="thoughtColor">생각 색상 (홑따옴표):</label>
                        <input type="color" id="thoughtColor" value="#6B4C9A">
                    </div>
                    <div class="color-picker">
                        <label for="emphasisColor">이텔릭체 색상:</label>
                        <input type="color" id="emphasisColor" value="#7B3B3B">
                    </div>
                    <div class="color-picker">
                        <label for="boldColor">볼드체 색상:</label>
                        <input type="color" id="boldColor" value="#FF0000">
                    </div>
                    <div class="font-size-controls">
                        <div class="font-size-input">
                            <label>입력창 폰트 크기:</label>
                            <input type="number" 
                                   id="sourceFontSize" 
                                   min="8" 
                                   max="32" 
                                   value="16">
                            <span>px</span>
                        </div>
                        <div class="font-size-input">
                            <label>결과창 폰트 크기:</label>
                            <input type="number" 
                                   id="resultFontSize" 
                                   min="8" 
                                   max="32" 
                                   value="16">
                            <span>px</span>
                        </div>
                    </div>
                    <div class="font-selector">
                        <label for="fontFamily">글꼴 선택:</label>
                        <select id="fontFamily">
                            <option value="Arial">Arial</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Verdana">Verdana</option>
                            <option value="Roboto Slab">Roboto Slab</option>
                            <option value="Noto Serif Telugu">Noto Serif Telugu</option>
                            <option value="Nanum Gothic">나눔고딕</option>
                            <option value="Malgun Gothic">맑은고딕</option>
                            <option value="RIDIBatang">RIDI 바탕</option>
                            <option value="Pretendard-Regular">프리텐다드</option>
                            <option value="SUIT-Regular">수트</option>
                            <option value="Chosunilbo_myungjo">조선일보명조</option>
                            <option value="ChosunSm">조선신명조</option>
                            <option value="ChosunGu">조선굴림</option>
                            <option value="ChosunSg">조선가는고딕</option>
                            <option value="NotoSerifKR">본명조</option>
                            <option value="GangwonEdu_OTFBoldA">강원도교육체</option>
                            <option value="MaruBuriSemiBold">마루부리</option>
                            <option value="SunBatang-Light">순바탕</option>
                            <option value="GowunDodum-Regular">고운돋움</option>
                            <option value="S-CoreDream-3Light">에스코어드림</option>
                            <option value="KyoboHandwriting2020A">교보손글씨 2020 박도연</option>
                            <option value="Ownglyph_corncorn-Rg">온글잎 콘콘체</option>
                            <option value="Ownglyph_wiseelist-Rg">온글잎 위씨리스트</option>
                            <option value="Ownglyph_ParkDaHyun">온글잎 박다현체</option>
                            <option value="Uiyeun">온글잎 의연체</option>
                            <option value="Yoonwoo">온글잎 윤우체</option>
                            <option value="Ownglyph_ryuttung-Rg">온글잎 류뚱체</option>
                            <option value="SDKukdetopokki">국대떡볶이</option>
                            <option value="SF_HambakSnow">SF함박눈</option>
                            <option value="MapoGoldenPier">마포금빛나루</option>
                            <option value="Iropke Batang">이롭게바탕</option>
                            <option value="Jeju Myeongjo">제주명조</option>
                            <option value="Father_loveletter">아빠의 연애편지</option>
                            <option value="KyoboHand">교보손글씨 2019</option>
                            <option value="Danjo-bold-Regular">단조</option>
                            <option value="LeeSeoyun">이서윤</option>
                        </select>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="enableMarkdown" checked>
                        <label for="enableMarkdown">마크다운 변환 사용</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="glossary-section">
            <h3>
                용어집/사전 기능
                <button class="toggle-btn" id="toggleGlossary"><i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="glossary-content" id="glossaryContent">
                <div class="glossary-input">
                    <input type="text" id="sourceTerm" placeholder="원본 용어">
                    <input type="text" id="targetTerm" placeholder="번역된 용어">
                    <select id="termContext" class="term-context">
                        <option value="all">모든 맥락</option>
                        <option value="general">일반</option>
                        <option value="tech">기술/IT</option>
                        <option value="med">의학</option>
                        <option value="law">법률</option>
                        <option value="biz">비즈니스</option>
                        <option value="acad">학술</option>
                    </select>
                    <button id="addTerm" class="btn-small">용어 추가</button>
                </div>
                <div class="glossary-search">
                    <input type="text" id="searchTerm" placeholder="용어 검색...">
                    <select id="filterContext" class="filter-context">
                        <option value="all">모든 맥락</option>
                        <option value="general">일반</option>
                        <option value="tech">기술/IT</option>
                        <option value="med">의학</option>
                        <option value="law">법률</option>
                        <option value="biz">비즈니스</option>
                        <option value="acad">학술</option>
                    </select>
                </div>
                <div class="glossary-controls">
                    <button id="exportGlossary" class="btn-small">용어집 내보내기</button>
                    <button id="importGlossary" class="btn-small">용어집 가져오기</button>
                    <input type="file" id="glossaryFileInput" accept=".json,.csv,.xlsx" style="display: none;">
                </div>
                <div class="glossary-list" id="glossaryList"></div>
            </div>
        </div>
        
        <div class="translation-history-section">
            <h3>
                번역 히스토리
                <button id="toggleHistory" class="toggle-btn"><i class="fas fa-chevron-down"></i></button>
            </h3>
            <div id="historyContent" class="history-content collapsed">
                <div class="history-filter">
                    <button data-filter="all" id="showAllHistory" class="btn-small active">전체</button>
                    <button data-filter="favorites" id="showBookmarked" class="btn-small">즐겨찾기</button>
                </div>
                <div class="history-controls">
                    <!-- 검색 입력 필드 추가 -->
                    <div class="history-search">
                        <input type="text" id="historySearch" placeholder="히스토리 검색..." class="history-search-input">
                    </div>
                    <button id="clearHistory" class="btn-small">히스토리 비우기</button>
                    <button id="exportHistory" class="btn-small">히스토리 내보내기</button>
                    <button id="importHistory" class="btn-small">히스토리 가져오기</button>
                    <input type="file" id="historyFileInput" accept=".json" style="display: none;">
                </div>
                <div class="history-list" id="historyList">
                    <!-- 히스토리 아이템들이 여기에 추가됨 -->
                    <div class="history-source" data-label="원문">
                        <!-- 원문 내용 -->
                    </div>
                    <div class="history-translated" data-label="번역">
                        <!-- 번역 내용 -->
                    </div>
                </div>
                </div>
            </div>
      </div>
      <div id="toastContainer" class="toast-container"></div>
      </div>
    </div>
    <script src="translator.js?v=250829a3"></script>
  </body>
</html>
